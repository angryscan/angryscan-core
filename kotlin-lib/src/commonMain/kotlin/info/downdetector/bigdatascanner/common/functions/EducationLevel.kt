package info.downdetector.bigdatascanner.common.functions

import info.downdetector.bigdatascanner.common.extensions.regexDetector

private val EDUCATION_LEVEL_REGEX_ONLY = """
(?ixu)
(?:^|(?<=\s)|(?<=[\(\[\{«"']))
(?:уровень\s+образования|образование)?
\s*[:\-]?\s*
(
  (?:
    дошкольное\s+образование|
    начальное\s+общее(?:\s+образование)?|
    основное\s+общее(?:\s+образование)?|
    среднее\s+общее(?:\s+образование)?
  )
  |
  (?:
    среднее\s+профессиональное(?:\s+образование)?|
    \bСПО\b|
    начальное\s+профессиональное(?:\s+образование)?|
    \bНПО\b|
    высшее(?:\s+образование)?|
    \bВО\b|
    бакалавриат|
    специалитет|
    магистратура|
    аспирантура|
    ординатура|
    ассистентура-стажировка|
    подготовка\s+кадров\s+высшей\s+квалификации|
    \bбакалавр(?:а|у|ом|е|ы|ов|ам|ами|ах)?\b|
    \bмагистр(?:а|у|ом|е|ы|ов|ам|ами|ах)?\b|
    \bаспирант(?:а|у|ом|е|ы|ов|ам|ами|ах)?\b|
    \bспециалист(?:а|у|ом|е|ы|ов|ам|ами|ах)?\b
  )
  |
  (?:
    дополнительное\s+профессиональное\s+образование|
    дополнительное\s+образование|
    \bДПО\b|
    профессиональная\s+переподготовка|
    повышение\s+квалификации
  )
)
(?:$|(?=\s)|(?=[\)\]\}»"'.,;:!?]))
""".trimIndent()

fun findEducationLevel(text: String, withContext: Boolean) = regexDetector(
    text,
    EDUCATION_LEVEL_REGEX_ONLY.toRegex(setOf(RegexOption.MULTILINE, RegexOption.IGNORE_CASE)),
    withContext
)
